Search.setIndex({"docnames": ["api.model_performance", "api.timeseriesflattener", "api.writers", "changelog", "faq", "index", "installation"], "filenames": ["api.model_performance.rst", "api.timeseriesflattener.rst", "api.writers.rst", "changelog.md", "faq.rst", "index.rst", "installation.md"], "titles": ["Model Performance", "Time Series Flattener", "Writers", "News and Changelog", "FAQ", "PSYCOP Machine Learning Utilites", "Installation"], "terms": {"tool": 0, "calcul": 0, "metric": 0, "class": [0, 1], "psycopmlutil": [0, 1], "modelperform": 0, "sourc": [0, 1, 4], "base": [0, 1], "object": [0, 1], "gener": [0, 1, 5], "static": [0, 1], "calculate_roc_auc": 0, "label": 0, "union": [0, 1], "seri": [0, 5], "list": [0, 1], "predict": [0, 1], "to_wid": 0, "bool": [0, 1], "add_level_prefix": 0, "option": [0, 1], "str": [0, 1], "none": [0, 1], "datafram": [0, 1], "area": 0, "under": 0, "receiv": [0, 1], "oper": 0, "characterist": 0, "curv": 0, "potenti": 0, "extend": 0, "other": 0, "requir": [0, 1, 4, 6], "probabl": 0, "instead": 0, "paramet": [0, 1], "pd": 0, "true": [0, 1, 6], "0": [0, 1, 3], "1": [0, 1, 3], "valu": [0, 1], "between": 0, "whether": [0, 1], "add": [0, 1, 4, 6], "prefix": 0, "name": [0, 1], "can": [0, 1, 4], "us": [0, 1, 4, 5], "indic": [0, 1], "aggreg": 0, "level": 0, "return": [0, 1], "format": [0, 1], "type": [0, 1], "compute_metr": 0, "int": [0, 1], "comput": [0, 1], "whole": 0, "bunch": 0, "both": 0, "binari": 0, "multiclass": 0, "task": 0, "wide": [0, 1], "long": 0, "performance_metrics_from_df": 0, "prediction_col_nam": 0, "label_col_nam": 0, "id_col_nam": [0, 1], "metadata_col_nam": 0, "id2label": 0, "dict": [0, 1], "fals": [0, 1], "from": [0, 1, 4], "row": [0, 1], "identifi": 0, "column": [0, 1], "overal": 0, "If": [0, 1, 4], "wa": [0, 3], "instanti": 0, "an": [0, 1, 4], "id": [0, 1], "ad": [0, 1, 3, 6], "identfi": 0, "via": 0, "df": [0, 1], "per": 0, "contain": [0, 1], "each": [0, 1], "float": [0, 1], "classif": 0, "ground": 0, "truth": 0, "group": [0, 1], "s": [0, 1, 6], "metadata": 0, "should": [0, 1, 4], "onli": [0, 1], "uniqu": 0, "e": [0, 1, 6], "g": [0, 1, 6], "model_nam": 0, "modal": 0, "set": [0, 1], "all": [0, 1, 4], "auto": 0, "detect": 0, "them": [0, 1], "map": [0, 1], "Not": 0, "need": [0, 6], "ar": [0, 1], "default": [0, 1], "performance_metrics_from_fil": 0, "load": 0, "jsonl": 0, "file": 0, "path": 0, "rais": [0, 1], "valueerror": [0, 1], "performance_metrics_from_fold": 0, "pattern": 0, "match": 0, "folder": [0, 4], "support": 0, "now": 0, "filenam": 0, "add_metadata_col": 0, "aggregate_predict": 0, "id_col": [0, 1], "predictions_col": 0, "label_col": 0, "mean": 0, "col": [0, 1], "get_metadata_col": 0, "skip": 0, "extract": 0, "which": [0, 1, 4], "The": 0, "singl": 0, "definit": 0, "includ": 0, "more": 0, "than": [0, 1], "idx_to_class": 0, "idx": 0, "index": [0, 5], "dictionari": [0, 1], "labels_to_int": 0, "label2id": 0, "convert": 0, "make": [0, 1, 4, 6], "sens": 0, "alreadi": [0, 1], "string": [0, 1], "either": [0, 1], "_description_": [0, 1], "scores_to_prob": 0, "score": 0, "maximum": 0, "length": 0, "2": 0, "arg_set": 1, "creat": 1, "featur": 1, "combin": 1, "specif": [1, 4], "see": 1, "exampl": 1, "shape": 1, "A": 1, "argument": 1, "add_predictor": 1, "possibl": 1, "input": 1, "predictor_df": 1, "prediction_times_df": 1, "source_values_col_nam": 1, "val": 1, "lookbehind_dai": 1, "30": 1, "resolve_multipl": 1, "max": 1, "fallback": 1, "print": 1, "dict_has_list_in_any_valu": 1, "check": [1, 4], "ha": 1, "ani": 1, "list_has_dict_with_list_as_valu": 1, "list_of_dict": 1, "flatteneddataset": 1, "dw_ek_borg": 1, "timestamp_col_nam": 1, "timestamp": 1, "min_dat": 1, "n_worker": 1, "60": 1, "predictor_col_name_prefix": 1, "pred": 1, "outcome_col_name_prefix": 1, "outc": 1, "turn": 1, "tabular": 1, "data": 1, "add_ag": 1, "id2date_of_birth": 1, "date_of_birth_col_nam": 1, "date_of_birth": 1, "ag": 1, "two": 1, "add_back_prediction_times_without_valu": 1, "pred_times_with_uuid": 1, "pred_time_uuid_colnam": 1, "ensur": 1, "repres": 1, "add_static_predictor": 1, "predictor": 1, "sex": 1, "etc": 1, "id_column": 1, "add_temporal_col_to_flattened_dataset": 1, "values_df": 1, "direct": 1, "interval_dai": 1, "callabl": 1, "new_col_nam": 1, "is_fallback_prop_warning_threshold": 1, "9": 1, "keep_val_timestamp": 1, "dataset": 1, "outcom": 1, "depend": [1, 4, 6], "tabl": 1, "patient_id": 1, "look": 1, "ahead": 1, "behind": 1, "how": [1, 5], "far": 1, "handl": 1, "multipl": 1, "within": 1, "take": 1, "i": [1, 5, 6], "function": 1, "ii": 1, "resolve_multiple_fn": 1, "catalogu": 1, "what": 1, "do": [1, 5], "lookahead": 1, "new": [1, 5, 6], "automat": [1, 6], "_within_": 1, "lookahead_dai": 1, "_dai": 1, "trigger": 1, "proport": 1, "prediction_tim": 1, "larger": 1, "threshold": 1, "unlik": 1, "learnabl": 1, "keep": 1, "tempor": 1, "separ": 1, "add_temporal_outcom": 1, "outcome_df": 1, "incid": 1, "outcome_df_values_col_nam": 1, "keep_outcome_timestamp": 1, "dichotom": 1, "dai": 1, "found": 1, "window": 1, "remov": 1, "after": 1, "patient": 1, "t2d": 1, "keep_outcom": 1, "allow": 1, "shortcut": 1, "_much_": 1, "faster": 1, "add_temporal_predictor": 1, "averag": 1, "bloodsampl": 1, "n": 1, "lookbehind": 1, "most": 1, "recent": 1, "blood": 1, "sampl": 1, "add_temporal_predictors_from_list_of_argument_dictionari": 1, "describ": [1, 6], "prediction_featur": 1, "you": [1, 4], "d": 1, "like": 1, "want": [1, 4], "pass": 1, "resolv": 1, "By": 1, "your": [1, 4, 6], "data_load": 1, "registri": 1, "Then": 1, "manual": 1, "defin": [1, 4], "strategi": 1, "ones": 1, "aren": 1, "t": 1, "resolve_fn": 1, "predictor_list": 1, "df_name": 1, "resolve_multiple_strat_nam": 1, "min": 1, "df_object": 1, "resolve_multiple_strategi": 1, "resolve_multiple_func": 1, "add_predictors_from_list": 1, "resolve_multiple_fn_dict": 1, "drop_records_outside_interval_dai": 1, "timestamp_pred_colnam": 1, "timestamp_value_colnam": 1, "where": 1, "timestamp_valu": 1, "timestamp_pr": 1, "niether": 1, "nor": 1, "flatten_temporal_values_to_df": 1, "prediction_times_with_uuid_df": 1, "pred_time_uuid_col_nam": 1, "low_variance_threshold": 1, "01": 1, "new_col_name_prefix": 1, "put": 1, "nan": 1, "panda": 1, "na": 1, "becaus": 1, "thi": [1, 5], "method": 1, "uuid": 1, "resolve_multiple_values_within_interval_dai": 1, "appli": 1, "collaps": 1, "one": 1, "record": 1, "sum": 1, "count": 1, "x": 1, "pr": 1, "select_and_assert_kei": 1, "key_list": 1, "kei": 1, "key_ord": 1, "order": 1, "lsit": 1, "process": 1, "keys_to_keep": 1, "select": 1, "get_count_in_group": 1, "grouped_df": 1, "get_earliest_value_in_group": 1, "get": [1, 6], "earliest": 1, "sort": 1, "descend": 1, "citizen": 1, "get_latest_value_in_group": 1, "latest": 1, "get_max_in_group": 1, "get_mean_in_group": 1, "get_min_in_group": 1, "get_sum_in_group": 1, "v": 3, "21": 3, "june": 3, "2022": 3, "document": [3, 5], "augmenti": 4, "come": 4, "extens": 4, "To": [4, 6], "clone": [4, 6], "repositori": [4, 5], "build": 4, "also": 4, "instal": [4, 5], "develop": [4, 5], "util": [4, 5, 6], "txt": [4, 6], "pip": [4, 6], "r": 4, "python": [4, 6], "m": 4, "pytest": 4, "desired_test": 4, "py": 4, "coverag": 4, "follow": [4, 6], "cov": 4, "sphinx": 4, "It": [4, 6], "furo": 4, "theme": 4, "custom": 4, "style": 4, "html": 4, "c": 4, "doc": 4, "librari": 4, "research": [4, 6], "we": [4, 6], "pleas": 4, "citat": 4, "here": 4, "For": 5, "when": 5, "changelog": 5, "faq": 5, "test": 5, "code": 5, "run": [5, 6], "suit": 5, "cite": 5, "work": 5, "model": 5, "perform": 5, "model_perform": 5, "time": 5, "flatten": 5, "timeseriesflatten": 5, "create_feature_combin": 5, "flattened_dataset": 5, "resolve_multiple_funct": 5, "writer": 5, "sql_writer": 5, "github": [5, 6], "page": 5, "start": 6, "psycop": 6, "ml": 6, "simpli": 6, "line": 6, "termin": 6, "prefer": 6, "packag": 6, "manag": 6, "git": 6, "http": 6, "com": 6, "aarhu": 6, "psychiatri": 6, "peotri": 6, "poetri": 6, "command": 6, "curl": 6, "ssl": 6, "org": 6, "python3": 6, "shell": 6, "configur": 6, "output": 6, "config": 6, "virtualenv": 6, "project": 6, "save": 6, "venv": 6, "directori": 6, "repo": 6, "move": 6, "cd": 6, "increas": 6, "version": 6, "patch": 6, "minor": 6, "major": 6, "accord": 6, "semant": 6, "dependneci": 6, "dev": 6, "packagenam": 6, "No": 6, "updat": 6, "replac": 6, "pyproject": 6, "toml": 6}, "objects": {"psycopmlutils.model_performance": [[0, 0, 0, "-", "model_performance"], [0, 0, 0, "-", "utils"]], "psycopmlutils.model_performance.model_performance": [[0, 1, 1, "", "ModelPerformance"]], "psycopmlutils.model_performance.model_performance.ModelPerformance": [[0, 2, 1, "", "calculate_roc_auc"], [0, 2, 1, "", "compute_metrics"], [0, 2, 1, "", "performance_metrics_from_df"], [0, 2, 1, "", "performance_metrics_from_file"], [0, 2, 1, "", "performance_metrics_from_folder"]], "psycopmlutils.model_performance.utils": [[0, 3, 1, "", "add_metadata_cols"], [0, 3, 1, "", "aggregate_predictions"], [0, 3, 1, "", "get_metadata_cols"], [0, 3, 1, "", "idx_to_class"], [0, 3, 1, "", "labels_to_int"], [0, 3, 1, "", "scores_to_probs"]], "psycopmlutils.timeseriesflattener": [[1, 0, 0, "-", "create_feature_combinations"], [1, 0, 0, "-", "flattened_dataset"], [1, 0, 0, "-", "resolve_multiple_functions"]], "psycopmlutils.timeseriesflattener.create_feature_combinations": [[1, 3, 1, "", "create_feature_combinations"], [1, 3, 1, "", "dict_has_list_in_any_value"], [1, 3, 1, "", "list_has_dict_with_list_as_value"]], "psycopmlutils.timeseriesflattener.flattened_dataset": [[1, 1, 1, "", "FlattenedDataset"], [1, 3, 1, "", "select_and_assert_keys"]], "psycopmlutils.timeseriesflattener.flattened_dataset.FlattenedDataset": [[1, 2, 1, "", "add_age"], [1, 2, 1, "", "add_back_prediction_times_without_value"], [1, 2, 1, "", "add_static_predictor"], [1, 2, 1, "", "add_temporal_col_to_flattened_dataset"], [1, 2, 1, "", "add_temporal_outcome"], [1, 2, 1, "", "add_temporal_predictor"], [1, 2, 1, "", "add_temporal_predictors_from_list_of_argument_dictionaries"], [1, 2, 1, "", "drop_records_outside_interval_days"], [1, 2, 1, "", "flatten_temporal_values_to_df"], [1, 2, 1, "", "resolve_multiple_values_within_interval_days"]], "psycopmlutils.timeseriesflattener.resolve_multiple_functions": [[1, 3, 1, "", "get_count_in_group"], [1, 3, 1, "", "get_earliest_value_in_group"], [1, 3, 1, "", "get_latest_value_in_group"], [1, 3, 1, "", "get_max_in_group"], [1, 3, 1, "", "get_mean_in_group"], [1, 3, 1, "", "get_min_in_group"], [1, 3, 1, "", "get_sum_in_group"]]}, "objtypes": {"0": "py:module", "1": "py:class", "2": "py:method", "3": "py:function"}, "objnames": {"0": ["py", "module", "Python module"], "1": ["py", "class", "Python class"], "2": ["py", "method", "Python method"], "3": ["py", "function", "Python function"]}, "titleterms": {"model": 0, "perform": 0, "model_perform": 0, "util": 0, "time": 1, "seri": 1, "flatten": 1, "timeseriesflatten": 1, "create_feature_combin": 1, "flattened_dataset": 1, "resolve_multiple_funct": 1, "writer": 2, "sql_writer": 2, "new": 3, "changelog": 3, "faq": 4, "how": 4, "do": 4, "i": 4, "test": 4, "code": 4, "run": 4, "suit": 4, "document": 4, "gener": 4, "cite": 4, "thi": 4, "work": 4, "psycop": 5, "machin": 5, "learn": 5, "utilit": 5, "content": 5, "get": 5, "start": 5, "api": 5, "refer": 5, "indic": 5, "search": 5, "instal": 6, "For": 6, "develop": 6, "when": 6, "us": 6}, "envversion": {"sphinx.domains.c": 2, "sphinx.domains.changeset": 1, "sphinx.domains.citation": 1, "sphinx.domains.cpp": 6, "sphinx.domains.index": 1, "sphinx.domains.javascript": 2, "sphinx.domains.math": 2, "sphinx.domains.python": 3, "sphinx.domains.rst": 2, "sphinx.domains.std": 2, "sphinx.ext.viewcode": 1, "sphinx": 56}})